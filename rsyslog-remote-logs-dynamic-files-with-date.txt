#Tested on Alma Linux 8.3
The following config receives logs and writes them to folders for each host by date and at the same time prevents remote logs from being written to /var/log/messages.

/etc/rsyslog.d/splunk.conf
###Splunk###

$template RemoteHost,"/var/log/remote/%fromhost-ip%/%$year%-%$month%-%$day%.log"

$RuleSet remote
*.* ?RemoteHost

module(load="imudp")
input(type="imudp" port="514" RuleSet="remote")

if $fromhost-ip != '127.0.0.1' then stop